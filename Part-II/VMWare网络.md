# VMWare 虚拟机网络配置

VMWare 虚拟机的网络配置有三种模式：

- Bridged（桥接模式）
- NAT（网络地址转换模式）
- Host-Only（仅主机模式）

在此，我们仅考虑 `NAT` 模式。`NAT` 模式也是 VMWare 的默认网络配置模式。

## 一、原理

`NAT` 模式下，VMWare 会虚拟出一个内网，VMWare 下的各个虚拟机都位于这个内网中。

在这个内网中，VMWare 充当着 `交换机/路由器` 的作用。如果，VMWare 下的各个虚拟机是使用自动获取 IP 功能，那么，就是由 VMWare 给各个虚拟机分配 IP 。

需要注意的是，我们的真机<small>（也就是宿主机）</small>也在这个内网中。即，主机和 VMWare 下的各个虚拟机都在这个虚拟的内网中。


## 二、相关设置（及默认值）

        某些相关设置是有默认值的，简单起见，不要去动这些设置，记住并使用这些默认值就好了。以避免遗漏或疏忽某处配置导致网络配置失败，虚拟机无法连接主机，无法上网的情况发生。

![vmware-net-01](./img/vmware-net-01.png)

![vmware-net-01](./img/vmware-net-02.png)

从上面两个图中<small>（图中都是默认值）</small>我们可以看到以下信息：

- 内网的网段是 `192.168.182.0` 网段。因此，VMWare 中的各个虚拟机的 IP 地址，无论是自动获取，还是手动设置，一定，也只能是 `192.168.182.x` 。
- 上文提到，在这个内网中，VMWare 从当了<font color="#0088dd">**交换机/路由器**</font> 的作用。它占用了这个网段中的 `192.168.182.2` 这个 IP 地址。
- VMware 本身占用的为什么是 `.2` 而不是类似于现实中的真实交换机/路由器那样的 `.1`？那是因为我们的真机<small>（也就是主机）</small>在这个虚拟的内网中占用了  `.1` IP 地址。


因此，结合上图:

- 在虚拟机中，在虚拟机看来，它所处网络的交换机的 IP 地址是 `192.168.182.2` 。

- 在虚拟机中，在虚拟机看来，这个网络中除了它们之外，还存在一台电脑<small>（及我们的真机/主机）</small>，它的 IP 地址是 `192.168.182.1` 。

- 我们的真机/主机有两个 IP 地址，真实网络中的 IP 地址<small>（例如，`192.168.1.x`）</small>和VMware 虚拟网络中的 IP 地址：`192.168.182.1` 。你使用哪个 IP 就意味着你是想在那个网络中访问我们的真机/主机。

- 真机-虚拟机的互 Ping 一定是使用的是 `192.168.182.x` IP 地址。因为真机和虚拟机只 <font color="#0088dd">**同时**</font> 位在于虚拟网络中。

- 如果虚拟机能 Ping 通真机，但真机却无法 Ping 通虚拟机，那通常就是因为真机（Win 10）开启了防火墙。
